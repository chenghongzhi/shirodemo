<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
    <div th:fragment="user_info">
        <div class="layui-header">
            <div class="layui-logo">
                <img src="../../static/image/attr.png" style="height: 40px;width: 40px;">Admin后台管理
            </div>
            <ul class="layui-nav layui-layout-left">
                <li class="layui-nav-item"><a href="/document/list">
                    <i class="layui-icon layui-icon-rate-half"></i>任务书下载</a></li>
            </ul>

            <ul class="layui-nav layui-layout-right">
                <li class="layui-nav-item">
                    <a href="javascript:;">
                        <span th:text="${session.name} +',欢迎登录'">欢迎登录</span>
                    </a>
                    <dl class="layui-nav-child">
                        <dd><a th:if="${session.name != null}" href="/user/userInfo" id="basicInfo">基本资料</a></dd>
                    </dl>
                </li>
                <li class="layui-nav-item"><a id="logout">退出</a></li>
            </ul>
        </div>
        <script>
            $("#logout").click(function () {
                $.ajax({
                    url: '/api/v1/user/logout',
                    type: 'get',
                    cache: false,
                    async: false,
                    headers: {
                        "Authorization": localStorage.getItem("Hm_lpvt_ec6be1ebbc53f7a86875f54c87c47b30")
                    },
                    contentType: 'application/json',
                    success: function() {
                        localStorage.removeItem("Hm_lpvt_ec6be1ebbc53f7a86875f54c87c47b30");
                        localStorage.removeItem("Hm_lpvt_ec6be1ebbc53f7a86875f54c87c47b31");
                        localStorage.removeItem("Hm_lpvt_ec6be1ebbc53f7a86875f54c87c47b32");
                        window.location.href="/";
                    }
                })
            })
        </script>
    </div>
</html>